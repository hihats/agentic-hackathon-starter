# シャッフルランチアプリ

## シャッフルランチWebサイトの仕様

### 1. 機能要件

#### フロントエンド (Nuxt 3 / TypeScript)

* **参加者入力画面:**
    * 参加者の名前をリスト形式で入力できるテキストエリアまたは入力フィールドを用意。
    * 改行区切り、カンマ区切りなど、複数の名前の一括入力に対応。
    * **参加人数制限:** 4名以上、2グループ以上であること（グループ分けの最低要件）。
* **グループ設定:**
    * 1グループあたりの**人数**（例：3人、4人）を設定する入力フィールドを用意。
    * または、作成する**グループ数**を設定する入力フィールドを用意。
    * （どちらか一方または両方で、バックエンドにグループ分けの基準を渡す。）
* **シャッフル実行:**
    * 入力された参加者リストとグループ設定をバックエンドAPIに送信するボタン（例：「シャッフル！」）を設置。
* **結果表示画面:**
    * バックエンドから受け取ったグループ分けの結果を、グループごとに見やすく表示（例：`グループ A: [名前1, 名前2, 名前3]`）。
* **エラー/ロード表示:**
    * API呼び出し中のローディング表示、およびエラー発生時の適切なメッセージ表示を行う。

#### バックエンド (Go)

* **APIエンドポイント:** `/api/shuffle` (POST リクエスト)
* **リクエストボディ (JSON):**

    ```json
    {
      "participants": ["名前1", "名前2", "名前3", "..."],
      "group_size": 3  // または "num_groups": 5 など、設定画面で選ばれた基準
    }
    ```

* **シャッフルロジック:**
    1.  受け取った参加者リストをランダムにシャッフルします。
    2.  `group_size`に基づいて、シャッフルされたリストを順にグループに分割します。
    3.  余りが出た場合（参加者総数が`group_size`で割り切れない場合）、余りのメンバーを既存のグループに均等に割り振ります（例：グループAに1人追加、グループBに1人追加...）。
* **レスポンスボディ (JSON):**

    ```json
    {
      "groups": [
        ["メンバー1", "メンバー2", "メンバー3"],
        ["メンバー4", "メンバー5", "メンバー6"],
        // ...
      ]
    }
    ```

* **バリデーション:**
    * 参加者リストが空でないこと。
    * グループ分けの設定（`group_size`など）が有効な値であること。

---

### 2. 技術スタックごとの役割

| 項目 | 技術 | 役割 |
| :--- | :--- | :--- |
| **フロントエンド** | Nuxt 3 (Vue.js) | UI/UX、状態管理、API通信。フォーム入力と結果表示を担当。 |
| **型付け** | TypeScript | フロントエンド・バックエンド間のAPI通信の型定義、フロントエンドの状態管理の型安全性を確保。 |
| **バックエンド** | Go | 高速なシャッフル処理とAPIエンドポイントの提供。**データベースとの連携は行いません**。 |

---

### 3. データフロー

1.  **ユーザー**がNuxtのフォームで参加者とグループ設定を入力。
2.  **Nuxt**がTypeScriptの型に基づき、参加者データと設定をGoのAPI `/api/shuffle` へPOSTリクエストで送信。
3.  **Go**がリクエストボディを受信し、シャッフルロジックを実行。
4.  **Go**がシャッフル結果をJSON形式でNuxtにレスポンス。
5.  **Nuxt**がレスポンスボディを受信し、結果表示画面でグループ分けを表示。